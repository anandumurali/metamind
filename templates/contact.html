{% extends 'base.html' %}
<body {% block attribute %} class="bg-gray-100 min-h-screen flex flex-col" {%endblock%}>
Â {% block content %}
<section
  class="flex-grow flex flex-col items-center justify-center px-4 py-10 sm:px-10 sm:py-20 bg-gray-800 rounded-xl m-2 sm:m-10 shadow-md"
>
  <div class="max-w-3xl w-full text-center">
    <h1 class="text-4xl sm:text-5xl font-bold text-blue-700 mb-4 sm:mb-6">Contact Us</h1>
    <p class="text-base sm:text-lg text-gray-200 leading-relaxed mb-6 sm:mb-10">
      Have questions, feedback, or just want to say hello? We'd love to hear
      from you! Please fill out the form below or reach out to us through the
      contact information provided.
    </p>

    <div class="bg-white p-6 sm:p-8 rounded-xl shadow-lg text-left">
      <!-- The form element. The 'id' is used by JavaScript to attach an event listener. -->
      <!-- The 'action' attribute should be replaced with your unique Formspree endpoint. -->
      <form id="contactForm" class="space-y-4 sm:space-y-6">
        <div>
          <label for="name" class="block text-blue-700 text-sm font-bold mb-2"
            >Your Name</label
          >
          <input
            type="text"
            id="name"
            name="name"
            class="shadow appearance-none border rounded w-full py-2 px-3 sm:py-3 sm:px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"
            placeholder="full name"
            required
          />
        </div>
        <div>
          <label for="email" class="block text-blue-700 text-sm font-bold mb-2"
            >Your Email</label
          >
          <input
            type="email"
            id="email"
            name="email"
            class="shadow appearance-none border rounded w-full py-2 px-3 sm:py-3 sm:px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"
            placeholder="enter email"
            required
          />
        </div>
        <div>
          <label
            for="subject"
            class="block text-blue-700 text-sm font-bold mb-2"
            >Subject</label
          >
          <input
            type="text"
            id="subject"
            name="subject"
            class="shadow appearance-none border rounded w-full py-2 px-3 sm:py-3 sm:px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"
            placeholder="Inquiry about Metamind"
            required
          />
        </div>
        <div>
          <label
            for="message"
            class="block text-blue-700 text-sm font-bold mb-2"
            >Your Message</label
          >
          <textarea
            id="message"
            name="message"
            rows="4"
            class="shadow appearance-none border rounded w-full py-2 px-3 sm:py-3 sm:px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"
            placeholder="Write your message here..."
            required
          ></textarea>
        </div>
        <div class="text-center">
          <button
            type="submit"
            id="submitButton"
            class="bg-blue-600 text-white px-6 py-2 sm:px-8 sm:py-3 rounded-full shadow hover:bg-blue-700 transition duration-300 font-semibold"
          >
            Send Message
          </button>
        </div>
        <!-- This div will display messages like "Sending...", "Sent successfully!", or "Error". -->
        <div id="formStatus" class="text-center mt-4 text-sm font-semibold"></div>
      </form>
    </div>

    <div class="mt-8 sm:mt-12 text-gray-200">
      <h2 class="text-2xl sm:text-3xl font-semibold text-blue-400 mb-3 sm:mb-4">
        Other Ways to Connect
      </h2>
      <p class="text-base sm:text-lg flex items-center justify-center gap-2 mb-2">
        <i class="fa fa-map-marker-alt text-xl"></i> Thevalakkattu ,Kumaranalloor
        ,Kottayam , Kerala
      </p>
      <p class="text-base sm:text-lg flex items-center justify-center gap-2 mb-2">
        <i class="fa fa-phone-alt text-xl"></i> +91 8921942132
      </p>
      <p class="text-base sm:text-lg flex items-center justify-center gap-2">
        <i class="fa fa-envelope text-xl"></i> metamindofficial@gmail.com
      </p>
    </div>

    <div class="flex justify-center gap-6 sm:gap-8 py-4 sm:py-6 mt-8 sm:mt-10">
      <a
        href="#"
        target="_blank"
        class="text-white hover:text-gray-300 text-2xl sm:text-3xl transition duration-300"
        ><i class="fab fa-instagram"></i
      ></a>
      <a
        href="#"
        target="_blank"
        class="text-white hover:text-gray-300 text-2xl sm:text-3xl transition duration-300"
        ><i class="fab fa-youtube"></i
      ></a>
      <a
        href="#"
        target="_blank"
        class="text-white hover:text-gray-300 text-2xl sm:text-3xl transition duration-300"
        ><i class="fab fa-github"></i
      ></a>
    </div>
  </div>
</section>

<!-- Link to Tailwind CSS CDN for styling -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- Link to Font Awesome for icons -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

<script>
  // Add an event listener to the form for the 'submit' event.
  document.getElementById('contactForm').addEventListener('submit', async function(event) {
    event.preventDefault(); // Prevent the default form submission behavior (page reload)

    const form = event.target; // Get the form element that triggered the event
    const formStatus = document.getElementById('formStatus'); // Get the div to display status messages
    const submitButton = document.getElementById('submitButton'); // Get the submit button

    // Display a "Sending..." message and disable the button
    formStatus.textContent = 'Sending message...';
    formStatus.className = 'text-center mt-4 text-blue-500 font-semibold';
    submitButton.disabled = true; // Disable the button to prevent multiple submissions
    submitButton.classList.add('opacity-50', 'cursor-not-allowed'); // Add visual feedback for disabled state

    // IMPORTANT: Replace 'YOUR_FORMSPREE_ENDPOINT' with your actual Formspree form ID.
    // To get this ID:
    // 1. Go to https://formspree.io/
    // 2. Sign up or log in.
    // 3. Create a new form and set its target email to metamindofficial@gmail.com.
    // 4. Formspree will give you a unique endpoint like https://formspree.io/f/xbjnopqr.
    //    Copy that entire URL and paste it below.
    const formspreeEndpoint = 'https://formspree.io/f/xovwekej';

    try {
      // Send the form data using Fetch API to the Formspree endpoint
      const response = await fetch(formspreeEndpoint, {
        method: 'POST', // Use POST method for submission
        body: new FormData(form), // Automatically constructs the request body from form inputs
        headers: {
          'Accept': 'application/json' // Request a JSON response from Formspree
        }
      });

      // Check if the response from Formspree was successful (status 2xx)
      if (response.ok) {
        formStatus.textContent = 'Message sent successfully! We will get back to you soon.';
        formStatus.className = 'text-center mt-4 text-green-600 font-semibold'; // Green for success
        form.reset(); // Clear all form fields after successful submission
      } else {
        // If the response was not OK, parse the error message from Formspree
        const data = await response.json();
        if (data.errors) {
          formStatus.textContent = `Error: ${data.errors.map(error => error.message).join(', ')}`;
        } else {
          formStatus.textContent = 'Oops! There was a problem sending your message.';
        }
        formStatus.className = 'text-center mt-4 text-red-600 font-semibold'; // Red for error
      }
    } catch (error) {
      // Handle network errors (e.g., no internet connection)
      console.error('Submission error:', error);
      formStatus.textContent = 'Network error: Could not connect to the server. Please try again.';
      formStatus.className = 'text-center mt-4 text-red-600 font-semibold';
    } finally {
      // Re-enable the submit button and remove its disabled styling regardless of success or error
      submitButton.disabled = false;
      submitButton.classList.remove('opacity-50', 'cursor-not-allowed');
    }
  });
</script>
{%endblock%}
</body>
</html>
